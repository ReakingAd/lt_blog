/* Build by Ltvieri 2017/03/10 17:32:52 */
(function(){"use strict";var t=this,e=t.jQuery;"undefined"==typeof t.blog&&(t.blog={}),t.blog.create={message:{},init:function(){this.initUeditor(),this.submitArticle(),this.addTag()},initUeditor:function(){var t=this,e=UE.getEditor("editor");e.addListener("ready",function(){t.getArticle(e)})},submitArticle:function(){var t=this;e(".btn-submit").on("click",function(){var i=e(".article-title").val(),a=UE.getEditor("editor").getContent(),n=e(".ariticle-id").val(),o=e(".article-status").val(),s=t.getKeyword(),r={id:n,title:i,content:a,status:o,keyword:s},c="";c=n?lt_global.baseurl+"/post/update":lt_global.baseurl+"/post/save",e.ajax({url:c,type:"post",dataType:"json",data:r,success:function(t){"success"===t.result?window.location.href="post/list":alert(t.result)}})})},getKeyword:function(){var t=e(".lt-tag"),i=[];return e.each(t,function(t,a){i.push(e(a).text())}),i.join(",")},getArticle:function(i){var a=e(".ariticle-id").val(),n={id:a};if(a){var o=t.blog.global.message.url_prefix+"post/get-article-by-id?id="+a;e.ajax({url:o,type:"post",dataType:"json",data:n,success:function(t){if(t&&t.status&&"success"===t.status)var a=t.msg;i.setContent(a.content);for(var n=a.keyword.split(","),o=e(".keyword-container"),s=0;s<n.length;s++)o.tags({content:n[s]})}})}},addTag:function(){e(".btn-addtag").on("click",function(){var t=e("#keyword"),i=e("#keyword").val();e(".keyword-container").tags({content:i}),t.val("")})}}}).call(this),$(document).ready(function(){"use strict";var t=window;t.jQuery;t.blog.create.init()});