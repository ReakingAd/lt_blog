/* Build by Ltvieri 2017/03/09 23:26:42 */
(function(){"use strict";var t=this,a=t.jQuery;"undefined"==typeof t.blog&&(t.blog={}),t.blog.show={init:function(){this.showKeyword(),this.showKeywordPage(),this.getPm2_5(),this.searchArticle()},showKeyword:function(){for(var t=lt_list.keywords.split(","),i=a(".tags-container"),e=0;e<t.length;e++)i.tags({content:t[e],canRemove:"false"})},showKeywordPage:function(){a(".tags-container").on("click",".tag-container",function(){var t=a(this).find(".lt-tag").text();window.location.href=lt_global.baseurl+"/list/tags/"+t})},getPm2_5:function(){a.ajax({url:"../post/aqi",type:"get",dataType:"json",cache:!0,success:function(t){var i;t&&t.aqi_pm25?(i=t.aqi_pm25,a(".pm2_5").html(i)):console.warn("获取pm2.5数据出错。")}})},searchArticle:function(){var t=this;a(".x_page_container .lt-pagination").LTPagination({ajaxUrl:"../post/search-article",ajaxCallback:t.filloutArticleList,pageSize:15,ajaxExtraParam:{}})},filloutArticleList:function(t){var i=[];if(!(t&&t.list.length>0))return console.log("无可用数据.");i=t.list;for(var e="",l=0;l<i.length;l++){var n=i[l].title,s=i[l].create_time.split(" ")[0],o="/article/"+i[l].id+"/"+i[l].title,r=i[l].status,c="";"2"===r&&(c='<i class="draft-label pull-left">[草稿]</i>'),e+='<li><a class="pull-left" href="'+o+'">'+n+"</a>"+c+'<span class="update-time pull-right">'+s+"</span></li>"}var u=a(".article-all");u.html(""),u.append(e)}}}).call(this),$(document).ready(function(){"use strict";var t=window;t.jQuery;t.blog.show.init()});