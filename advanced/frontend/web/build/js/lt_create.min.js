/* Build by Ltvieri 2016/11/09 23:00:27 */
(function(){"use strict";var t=this,e=t.jQuery;"undefined"==typeof t.blog&&(t.blog={}),t.blog.create={message:{},init:function(){this.initUeditor(),this.submitArticle(),this.addTag()},initUeditor:function(){var t=this,e=UE.getEditor("editor");e.addListener("ready",function(){t.getArticle(e)})},submitArticle:function(){var t=this;e(".btn-submit").on("click",function(){var i=e(".article-title").val(),n=UE.getEditor("editor").getContent(),a=e(".ariticle-id").val(),o=e(".article-status").val(),r=t.getKeyword(),s={id:a,title:i,content:n,status:o,keyword:r},c="";c=a?"post/update":"post/save",e.ajax({url:c,type:"post",dataType:"json",data:s,success:function(t){"success"===t.result?window.location.href="list":alert(t.result)}})})},getKeyword:function(){var t=e(".lt-tag"),i=[];return e.each(t,function(t,n){i.push(e(n).text())}),i.join(",")},getArticle:function(i){var n=e(".ariticle-id").val(),a={id:n};if(n){var o=t.blog.global.message.url_prefix+"post/get-article?id="+n;e.ajax({url:o,type:"post",dataType:"json",data:a,success:function(t){i.setContent(t.content);for(var n=t.keyword.split(","),a=e(".keyword-container"),o=0;o<n.length;o++)a.tags({content:n[o]})}})}},addTag:function(){e(".btn-addtag").on("click",function(){var t=e("#keyword"),i=e("#keyword").val();e(".keyword-container").tags({content:i}),t.val("")})}}}).call(this),$(document).ready(function(){"use strict";var t=window;t.jQuery;t.blog.create.init()});